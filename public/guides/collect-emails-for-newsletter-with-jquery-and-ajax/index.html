<!DOCTYPE html>
<html lang="en">
<head>
  <title>How to submit with jQuery</title>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
   (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
   m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-63770314-10', 'auto');
  ga('send', 'pageview');

  </script>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="google-site-verification" content="c242Hf9YyeiK5d9ElD3r4JPDEmCMs7FUBAzcK-WpAtE" />

  <!-- prerender support -->
  <meta name="fragment" content="!">

  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700' rel='stylesheet' type='text/css'>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.0.0/styles/solarized_light.min.css">
  <link rel="stylesheet" href="/assets/app-2016-09-25.css">

  <!-- favicons -->
  <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/img/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/img/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/img/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/img/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/img/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/img/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
  <link rel="manifest" href="/img/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment.min.js"></script>
</head>
<body>
  <div id="root">
    <div>
    <header class="navigation" role="banner">
      <div class="navigation-wrapper">
        <a href="/" class="logo">
          <img src="/img/logo.svg" alt="FormBucket" />
        </a>
        <nav id="nav-logged-out" role="navigation">
          <a href="#" class="navigation-menu-button">MENU</a>
          <ul id="js-navigation-menu" class="navigation-menu">
            <li class="nav-link">
               <a href="/guides">Guides</a>
            </li>
            <li class="nav-link">
              <a href="/signup" onClick={this.handleLinkClick}>Sign Up</a>
            </li>
            <li class="nav-link">
              <a href="/login" onClick={this.handleLinkClick}>Login</a>
            </li>
          </ul>
        </nav>
        <nav id="nav-logged-in" role="navigation" style="display: none">
          <a href="#" class="navigation-menu-button">MENU</a>
          <ul class="navigation-menu">
            <li class="nav-link">
               <a href="/guides">Guides</a>
            </li>
            <li class="nav-link">
              <a href="/buckets" onClick={this.handleLinkClick}>Buckets</a>
            </li>
            <li class="nav-link">
              <a href="/account" onClick={this.handleLinkClick}>Account</a>
            </li>
          </ul>
        </nav>
        <!-- Script will hide/show the correct menu -->
        <script src="/assets/nav-2016-09-25.js"></script>
      </div>
    </header>
    <div class="main">
      <div class="page-heading">
        <div class="wrapper">
          <h1>Create a Signup Form with jQuery and AJAX</h1>
        </div>
      </div>
      <div class="wrapper">
        <div class="two-thirds">
          <h2>Overview</h2>
<p>In this tutorial we'll show you how to set up a simple newsletter signup form to capture emails using FormBucket, jQuery and AJAX. When visitors submit the form, you can keep them on the same page and display a message that they've been added to the list (or not if there was a problem).</p>
<p>Check out the <a href="/newsletter/"><strong>Live Demo</strong></a> (and sign up for the spectacular FormBucket newsletter).</p>
<p>Here is the basic markup for our form.</p>
<pre><code class="language-html">&lt;<span class="hljs-keyword">form</span> id=<span class="hljs-string">"subscribe"</span>
      action=<span class="hljs-string">"post"</span>
      method=<span class="hljs-string">"http://api.formbucket.com/f/MyBucketId"</span>&gt;
  &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">"email"</span>
         name=<span class="hljs-string">"email"</span>
         placeholder=<span class="hljs-string">"Enter your email..."</span>&gt;
  &lt;<span class="hljs-keyword">input</span> <span class="hljs-keyword">type</span>=<span class="hljs-string">"submit"</span> value=<span class="hljs-string">"Get the Newsletter"</span> /&gt;
&lt;/<span class="hljs-keyword">form</span>&gt;
</code></pre>
<p>As an awesome web designer you are going to use your own pixel perfect CSS (or maybe even SCSS) to style the form, so we won't cover that in this tutorial.</p>
<p>Now let's get on to the hard stuff...</p>
<h2>Collecting the data</h2>
<p>FormBucket's API accepts data in two formats: <code>form</code> and <code>json</code>. For simple use case like this one, you probably want to use form. For advanced use case you may prefer to opt into our <a href="http://localhost:3000/docs/api/">JSON API</a>.</p>
<h3>Option 1 - Post Form Data with jQuery</h3>
<p>The complete script includes an outer function that runs after the
page is loaded, and it adds an event handler for our form that prevents the default
action (e.g. leaving the page). It also includes some validations so that people
don't send you blank values.</p>
<pre><code class="language-js">$(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  $(<span class="hljs-string">'#subscribe'</span>).submit(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
    event.preventDefault();

    <span class="hljs-keyword">var</span> subscribeForm = $(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">var</span> subscribeButton = $(<span class="hljs-string">'input[type=submit]'</span>, subscribeForm);

    <span class="hljs-keyword">if</span> ($(<span class="hljs-string">"input[name='email']"</span>).val() === <span class="hljs-string">''</span>) {
      alert(<span class="hljs-string">'Please enter an email address'</span>)
      <span class="hljs-keyword">return</span>
    }

    $.ajax({
      url: subscribeForm.prop(<span class="hljs-string">'action'</span>),
      type: <span class="hljs-string">'POST'</span>,
      crossDomain: <span class="hljs-literal">true</span>,
      headers : {
        <span class="hljs-string">'accept'</span> : <span class="hljs-string">'application/javascript'</span>,
      },
      data: $(<span class="hljs-string">'#subscribe'</span>).serialize(),
      beforeSend: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        subscribeButton.prop(<span class="hljs-string">'disabled'</span>, <span class="hljs-string">'disabled'</span>);
      }
    })
    .done(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
      <span class="hljs-comment">// You will do something WAY BETTER than alert</span>
      <span class="hljs-comment">// because you are an awesome designer.</span>
      alert(<span class="hljs-string">'Thanks for subscribing!'</span>)
    })
    .fail(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
      alert(<span class="hljs-string">'Dang, something went wrong!'</span>)
      subscribeButton.prop(<span class="hljs-string">'disabled'</span>, <span class="hljs-literal">false</span>);
    })

  });
});
</code></pre>
<h3>Option 2 - Post JSON Data with jQuery</h3>
<p>If you want to use our JSON API, then you could change the AJAX call to the following. This example uses the powerful (and somewhat cryptic) <code>reduce</code> function, but you can build the JSON content any way you like.</p>
<pre><code class="language-js">$.ajax({
  url: <span class="hljs-string">'https://api.formbucket.com/f/CPaseeA'</span>,
  type: <span class="hljs-string">'POST'</span>,
  crossDomain: <span class="hljs-literal">true</span>,
  headers : {
    <span class="hljs-string">'accept'</span> : <span class="hljs-string">'application/javascript'</span>,
    <span class="hljs-string">'content-type'</span>: <span class="hljs-string">'application/json'</span>
  },
  data: $(<span class="hljs-string">'#subscribe'</span>)
  .serializeArray()
  .reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">p,v</span>)</span>{ p[v.name] = v.value; <span class="hljs-keyword">return</span> p }, {});
})
</code></pre>
<p>Hope you found this helpful! If so please tell us (and your friends) on <a href="https://twitter.com/FormBucket">Twitter @formbucket</a>. Thanks!</p>

        </div>
      </div>
    </div>
    <div class="footer">
      <a href="/" className="logo">
        <img src="/img/logo-purple.svg" alt="FormBucket" />
      </a>
      <p>
        &copy; 2015-2016 <a href="https://websitehq.com">WebsiteHQ, LLC</a>
      </p>
      <div>
        <a href="/about">About</a> | <a href="/contact">Contact</a> | <a href="/terms">Terms</a> | <a href="/privacy-policy">Privacy Policy</a>
      </div>
    </div>
    </div>
  </div>
</body>
</html>
